{"ast":null,"code":"import _defineProperty from \"/home/franreysaycon/Repositories/maneko-next/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/franreysaycon/Repositories/maneko-next/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/franreysaycon/Repositories/maneko-next/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/franreysaycon/Repositories/maneko-next/src/component/CardCollection/index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Box } from '@chakra-ui/react';\nimport { motion, useAnimation } from 'framer-motion';\nimport React, { useState } from 'react';\nimport Card from './Card';\nvar MotionBox = motion(Box);\n_c = MotionBox;\n\nvar swipePower = function swipePower(offset, absDistance) {\n  return offset / absDistance * 100;\n};\n\nvar CardCollection = function CardCollection(_ref) {\n  _s();\n\n  var cards = _ref.cards;\n  var controls = useAnimation();\n\n  var _useState = useState(0),\n      curIndex = _useState[0],\n      setCurIndex = _useState[1];\n\n  var handleDragEnd = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_, _ref2) {\n      var offset, power;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              offset = _ref2.offset;\n              power = swipePower(offset.x, 300);\n\n              if (!(power > 60 && curIndex - 1 !== -1)) {\n                _context.next = 18;\n                break;\n              }\n\n              if (!(cards.length > 3 && curIndex <= cards.length - 1 && curIndex - 1 > 1)) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 6;\n              return controls.start({\n                x: -270 * (curIndex - 1) - 25\n              });\n\n            case 6:\n              _context.next = 15;\n              break;\n\n            case 8:\n              if (!(cards.length == 2)) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 11;\n              return controls.start({\n                x: -255 * (curIndex - 1)\n              });\n\n            case 11:\n              _context.next = 15;\n              break;\n\n            case 13:\n              _context.next = 15;\n              return controls.start({\n                x: -270 * (curIndex - 1)\n              });\n\n            case 15:\n              setCurIndex(function (s) {\n                return s - 1;\n              });\n              _context.next = 32;\n              break;\n\n            case 18:\n              if (!(power < -60 && curIndex + 1 < cards.length)) {\n                _context.next = 32;\n                break;\n              }\n\n              if (!(cards.length > 3 && curIndex >= 1 && curIndex + 1 <= cards.length - 1)) {\n                _context.next = 24;\n                break;\n              }\n\n              _context.next = 22;\n              return controls.start({\n                x: -270 * (curIndex + 1) - (25 * curIndex - 1)\n              });\n\n            case 22:\n              _context.next = 31;\n              break;\n\n            case 24:\n              if (!(curIndex == cards.length - 1)) {\n                _context.next = 29;\n                break;\n              }\n\n              _context.next = 27;\n              return controls.start({\n                x: -255 * (curIndex + 1)\n              });\n\n            case 27:\n              _context.next = 31;\n              break;\n\n            case 29:\n              _context.next = 31;\n              return controls.start({\n                x: -270 * (curIndex + 1)\n              });\n\n            case 31:\n              setCurIndex(function (s) {\n                return s + 1;\n              });\n\n            case 32:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleDragEnd(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    d: \"flex\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      w: \"330px\",\n      h: \"170px\",\n      overflow: \"hidden\",\n      pos: \"relative\",\n      children: /*#__PURE__*/_jsxDEV(MotionBox, {\n        display: \"flex\",\n        position: \"relative\",\n        height: \"170px\",\n        drag: \"x\",\n        dragDirectionLock: true,\n        dragConstraints: {\n          left: 0,\n          right: 0\n        },\n        dragMomentum: false,\n        animate: controls,\n        transition: {\n          x: {\n            type: \"spring\",\n            stiffness: 600,\n            damping: 100\n          }\n        },\n        onDragEnd: handleDragEnd,\n        layout: true,\n        css: {\n          \">div\": {\n            marginRight: '15px'\n          },\n          \">div:last-child\": {\n            marginRight: '0px'\n          }\n        },\n        children: cards.map(function (card) {\n          return /*#__PURE__*/_jsxDEV(Card, _objectSpread({}, card), card.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 34\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(CardCollection, \"xeueF6z6wtncrju1wUz/CfQgPxw=\", false, function () {\n  return [useAnimation];\n});\n\n_c2 = CardCollection;\nCardCollection.defaultProps = {\n  cards: []\n};\nexport default CardCollection;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MotionBox\");\n$RefreshReg$(_c2, \"CardCollection\");","map":{"version":3,"sources":["/home/franreysaycon/Repositories/maneko-next/src/component/CardCollection/index.tsx"],"names":["Box","motion","useAnimation","React","useState","Card","MotionBox","swipePower","offset","absDistance","CardCollection","cards","controls","curIndex","setCurIndex","handleDragEnd","_","power","x","length","start","s","left","right","type","stiffness","damping","marginRight","map","card","id","defaultProps"],"mappings":"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","sourcesContent":["import { Box } from '@chakra-ui/react'\nimport { motion, useAnimation } from 'framer-motion'\nimport React, { useState } from 'react'\nimport Card from './Card'\nimport { CardT } from './types'\n\ninterface CardCollectionProps {\n  cards: CardT[];\n}\n\nconst MotionBox = motion(Box)\n\nconst swipePower = (offset: number, absDistance: number): number => {\n  return (offset / absDistance) * 100;\n}\n\nconst CardCollection: React.FC<CardCollectionProps> = ({ cards }) => {\n  const controls = useAnimation();\n  const [curIndex, setCurIndex] = useState<number>(0)\n\n  const handleDragEnd = async (_, { offset }) => {\n    const power = swipePower(offset.x, 300);\n    if (power > 60 && curIndex -1 !== -1) {\n      if(cards.length > 3 && curIndex <= cards.length - 1 && curIndex - 1 > 1){\n        await controls.start({\n          x: -270*(curIndex-1) - 25,\n        })\n      }\n      else if(cards.length == 2){\n        await controls.start({\n          x: -255*(curIndex-1),\n        })\n      }\n      else {\n        await controls.start({\n          x: -270*(curIndex-1),\n        })\n      }\n      setCurIndex(s => s - 1)\n    } else if (power < -60 && curIndex + 1 < cards.length) {\n      if(cards.length > 3 && curIndex >= 1 && curIndex + 1 <= cards.length - 1 ){\n        await controls.start({\n          x: -270*(curIndex+1) - (25*curIndex-1),\n        })\n      }\n      else if(curIndex == cards.length - 1){\n        await controls.start({\n          x: -255*(curIndex+1),\n        })\n      }\n      else{\n        await controls.start({\n          x: -270*(curIndex+1),\n        })\n      }\n      setCurIndex(s => s + 1)\n    }\n  };\n\n  return (\n    <Box d=\"flex\">\n      <Box\n        w=\"330px\"\n        h=\"170px\"\n        overflow=\"hidden\"\n        pos=\"relative\"\n      >\n        <MotionBox\n          display=\"flex\"\n          position=\"relative\"\n          height=\"170px\"\n          drag=\"x\"\n          dragDirectionLock\n          dragConstraints={{ left: 0, right: 0 }}\n          dragMomentum={false}\n          animate={controls}\n          transition={{\n            x: { type: \"spring\", stiffness: 600, damping: 100},\n          }}\n          onDragEnd={handleDragEnd}\n          layout\n          css={{\n            \">div\": {\n              marginRight: '15px'\n            },\n            \">div:last-child\": {\n              marginRight: '0px'\n            }\n          }}\n        >\n            { cards.map( card => <Card key={card.id} {...card} /> )}\n        </MotionBox>\n      </Box>\n    </Box>\n  )\n}\n\nCardCollection.defaultProps = {\n  cards: []\n}\n\nexport default CardCollection\n"]},"metadata":{},"sourceType":"module"}